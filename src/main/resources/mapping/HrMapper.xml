<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.edu.ncu.stephenhe.recruitment.dao.mapper.HrMapper">


<!--    1. 做一个结果集映射：StudentTeacher
        2. StudentTeacher结果集的类型为 Student
        3. 学生中老师的属性为teacher，对应数据库中为tid。多个 [1,...）学生关联一个老师=> 一对一，一对多
        -->
    <resultMap id="HrCompany" type="cn.edu.ncu.stephenhe.recruitment.entity.Hr">
        <id column="hr_id" property="hrId" jdbcType="INTEGER" />
        <result column="hr_name" property="hrName" jdbcType="VARCHAR" />
        <!--association关联属性 property属性名 javaType属性类型 column在多的一方的表中的列名-->
        <association property="cn.edu.ncu.stephenhe.recruitment.entity.Company" column="companyId" javaType="Company" select="getCompany"/>
    </resultMap>

    <select id="getHrs" resultMap="HrCompany">
select * from hr
    </select>

    <!--这里传递过来的id，只有一个属性的时候，下面可以写任何值
    association中column多参数配置： column="{key=value,key=value}" 其实就是键值对的形式，
    key是传给下个sql的取值名称，value是片段一中sql查询的字段名。 -->
    <select id="getCompany" resultType="cn.edu.ncu.stephenhe.recruitment.entity.Company">
select * from company where company_id = #{company_id}
    </select>

    <resultMap id="Hr_Company" type="cn.edu.ncu.stephenhe.recruitment.entity.Hr">
        <id column="hrId" property="hrId" jdbcType="INTEGER" />
        <result column="hrTel" property="hrTel" jdbcType="VARCHAR" />
        <result column="hrName" property="hrName" jdbcType="VARCHAR" />
        <result column="hrLogo" property="hrLogo" jdbcType="VARCHAR" />
        <result column="hrEmail" property="hrEmail" jdbcType="VARCHAR" />
        <result column="hrProfile" property="hrProfile" jdbcType="VARCHAR" />
        <!--association关联属性 property属性名 javaType属性类型 column在多的一方的表中的列名-->
        <association  property="company"  javaType="cn.edu.ncu.stephenhe.recruitment.entity.Company" >
            <result column="companyName" property="companyName" jdbcType="VARCHAR" />
        </association>
    </resultMap>


    <select id="getHrsInfo" resultMap="Hr_Company" >
select h.hr_id hrId,h.hr_Tel hrTel, h.hr_name hrName,h.hr_logo hrLogo,h.hr_email hrEmail,h.hr_profile hrProfile , c.company_name companyName
from hr h,company c  where h.company_id = c.company_id
    </select>




</mapper>